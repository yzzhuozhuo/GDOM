{"ast":null,"code":"var _jsxFileName = \"c:\\\\Users\\\\yangzhuo_sx\\\\Desktop\\\\GDOM\\\\GDOM\\\\gdom\\\\src\\\\components\\\\quickLogIn\\\\quickLogIn.js\";\n// import { runInContext } from \"vm\";\nimport React, { Component } from 'react';\nimport { Input, Alert } from 'antd';\nimport { Button } from 'antd';\nimport './quickLogIn.css';\nimport ajaxParam from '../../api/ajaxParam';\nimport qs from 'qs';\nimport homebackground from '../../assets/image/bg3.jpg';\nconst homeImage = {\n  width: '100%',\n  height: '100%',\n  position: 'absolute',\n  backgroundSize: '100% 100%',\n  //记得这里100%\n  background: \"url(\".concat(homebackground, \")\")\n};\n\nclass quickLogIn extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isNote: true,\n      isError: false,\n      mobile: '',\n      code: '' // 获取用户输入的手机号\n\n    };\n\n    this.setMobile = e => {\n      e.preventDefault();\n      this.setState({\n        mobile: e.target.value\n      });\n    };\n\n    this.setCode = e => {\n      e.preventDefault();\n      this.setState({\n        code: e.target.value\n      });\n    };\n\n    this.logIn = () => {\n      const code = this.state.code;\n      const mobile = this.state.mobile;\n      const data = {\n        \"mobile\": mobile,\n        \"vcode\": code\n      };\n\n      const reqResult = data => ajaxParam('http://47.94.103.140/gdom/login/mobile', qs.stringify(data), 'post');\n\n      reqResult(data).then(res => {\n        if (res.data.islogin) {\n          if (res.data.role === 'student') {// 跳转到学生主页\n          } else {\n            // 跳转到老师主页\n            this.props.history.replace({\n              pathname: '/teacherHome',\n              query: {\n                \"uid\": res.data.uid,\n                \"role\": res.data.role,\n                \"username\": res.data.username\n              }\n            });\n          }\n        } else {\n          this.setState({\n            isError: true\n          });\n          setTimeout(() => {\n            this.setState({\n              isError: false\n            });\n          }, 2000);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.getCode = () => {\n      const buttonValue = this.refs.but.props.children;\n      const mobile = this.state.mobile;\n\n      if (buttonValue === '获取短信验证码') {\n        // 请求获取短信验证码的接口\n        const data = {\n          \"mobile\": mobile\n        };\n\n        const reqResult = data => ajaxParam('http://47.94.103.140/gdom/verify/message', qs.stringify(data), 'post');\n\n        reqResult(data).then(res => {}).catch(err => {\n          console.log(err);\n        });\n        console.log(\"短信验证\");\n      } else {\n        // 请求获取语音验证码的接口\n        const data = {\n          \"mobile\": mobile\n        };\n\n        const reqResult = data => ajaxParam('http://47.94.103.140/gdom/verify/speech', qs.stringify(data), 'post');\n\n        reqResult(data).then(res => {}).catch(err => {\n          console.log(err);\n        });\n        console.log(\"语音验证\");\n      }\n    };\n\n    this.changStyle = () => {\n      this.setState(prevState => ({\n        isNote: !prevState.isNote\n      }));\n    };\n  }\n\n  render() {\n    const _this$state = this.state,\n          isNote = _this$state.isNote,\n          isError = _this$state.isError;\n    return React.createElement(\"div\", {\n      style: homeImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"\\u6B22\\u8FCE\\u767B\\u9646\\u7C89\\u7B14\\u5934\\u7CFB\\u7EDF\"), React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7...\",\n      className: \"InpNumber\",\n      onChange: this.setMobile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"getCode\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u9A8C\\u8BC1\\u7801\",\n      className: \"Inp\",\n      size: 'large',\n      onChange: this.setCode,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"primary\",\n      ref: \"but\",\n      className: \"btn\",\n      size: 'large',\n      onClick: this.getCode,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, isNote ? '获取短信验证码' : '获取语音验证码')), React.createElement(\"p\", {\n      className: \"change\",\n      onClick: this.changStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, isNote ? '语音验证' : '短信验证'), React.createElement(Button, {\n      type: \"primary\",\n      onClick: this.logIn,\n      style: {\n        width: \"300px\"\n      },\n      size: 'large',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"\\u5FEB\\u901F\\u767B\\u9646\"), isError ? React.createElement(Alert, {\n      message: \"Error\",\n      description: \"\\u9A8C\\u8BC1\\u5931\\u8D25\\uFF0C\\u8BF7\\u91CD\\u65B0\\u9A8C\\u8BC1\",\n      type: \"error\",\n      showIcon: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }) : null));\n  }\n\n}\n\nexport default quickLogIn;","map":{"version":3,"sources":["c:\\Users\\yangzhuo_sx\\Desktop\\GDOM\\GDOM\\gdom\\src\\components\\quickLogIn\\quickLogIn.js"],"names":["React","Component","Input","Alert","Button","ajaxParam","qs","homebackground","homeImage","width","height","position","backgroundSize","background","quickLogIn","state","isNote","isError","mobile","code","setMobile","e","preventDefault","setState","target","value","setCode","logIn","data","reqResult","stringify","then","res","islogin","role","props","history","replace","pathname","query","uid","username","setTimeout","catch","err","console","log","getCode","buttonValue","refs","but","children","changStyle","prevState","render"],"mappings":";AAAA;AAEA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,EAAgBC,KAAhB,QAA6B,MAA7B;AACA,SAASC,MAAT,QAAuB,MAAvB;AACA,OAAO,kBAAP;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAOC,cAAP,MAA4B,4BAA5B;AACA,MAAMC,SAAS,GAAG;AAChBC,EAAAA,KAAK,EAAE,MADS;AAEhBC,EAAAA,MAAM,EAAE,MAFQ;AAGhBC,EAAAA,QAAQ,EAAE,UAHM;AAIhBC,EAAAA,cAAc,EAAE,WAJA;AAIa;AAC7BC,EAAAA,UAAU,gBAAUN,cAAV;AALM,CAAlB;;AAQA,MAAMO,UAAN,SAAyBb,SAAzB,CAAmC;AAAA;AAAA;AAAA,SACjCc,KADiC,GACzB;AACNC,MAAAA,MAAM,EAAE,IADF;AAENC,MAAAA,OAAO,EAAE,KAFH;AAGNC,MAAAA,MAAM,EAAE,EAHF;AAINC,MAAAA,IAAI,EAAE,EAJA,CAOR;;AAPQ,KADyB;;AAAA,SASjCC,SATiC,GASpBC,CAAD,IAAO;AACjBA,MAAAA,CAAC,CAACC,cAAF;AACA,WAAKC,QAAL,CAAc;AAAEL,QAAAA,MAAM,EAAEG,CAAC,CAACG,MAAF,CAASC;AAAnB,OAAd;AACD,KAZgC;;AAAA,SAejCC,OAfiC,GAetBL,CAAD,IAAO;AACfA,MAAAA,CAAC,CAACC,cAAF;AACA,WAAKC,QAAL,CAAc;AAAEJ,QAAAA,IAAI,EAAEE,CAAC,CAACG,MAAF,CAASC;AAAjB,OAAd;AACD,KAlBgC;;AAAA,SAqBjCE,KArBiC,GAqBzB,MAAM;AACZ,YAAMR,IAAI,GAAG,KAAKJ,KAAL,CAAWI,IAAxB;AACA,YAAMD,MAAM,GAAG,KAAKH,KAAL,CAAWG,MAA1B;AACA,YAAMU,IAAI,GAAG;AAAE,kBAAUV,MAAZ;AAAoB,iBAASC;AAA7B,OAAb;;AACA,YAAMU,SAAS,GAAID,IAAD,IAAUvB,SAAS,CAAC,wCAAD,EAA2CC,EAAE,CAACwB,SAAH,CAAaF,IAAb,CAA3C,EAA+D,MAA/D,CAArC;;AACAC,MAAAA,SAAS,CAACD,IAAD,CAAT,CAAgBG,IAAhB,CAAqBC,GAAG,IAAI;AAC1B,YAAIA,GAAG,CAACJ,IAAJ,CAASK,OAAb,EAAsB;AACpB,cAAID,GAAG,CAACJ,IAAJ,CAASM,IAAT,KAAkB,SAAtB,EAAiC,CAC/B;AACD,WAFD,MAEO;AACL;AACD,iBAAKC,KAAL,CAAWC,OAAX,CAAmBC,OAAnB,CAA2B;AAAEC,cAAAA,QAAQ,EAAE,cAAZ;AAA4BC,cAAAA,KAAK,EAAE;AAAC,uBAAOP,GAAG,CAACJ,IAAJ,CAASY,GAAjB;AAAsB,wBAAQR,GAAG,CAACJ,IAAJ,CAASM,IAAvC;AAA6C,4BAAWF,GAAG,CAACJ,IAAJ,CAASa;AAAjE;AAAnC,aAA3B;AACA;AACF,SAPD,MAOO;AACL,eAAKlB,QAAL,CAAc;AAAEN,YAAAA,OAAO,EAAE;AAAX,WAAd;AACAyB,UAAAA,UAAU,CAAC,MAAM;AACf,iBAAKnB,QAAL,CAAc;AAAEN,cAAAA,OAAO,EAAE;AAAX,aAAd;AACD,WAFS,EAEP,IAFO,CAAV;AAGD;AACF,OAdD,EAcG0B,KAdH,CAcSC,GAAG,IAAI;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,OAhBD;AAiBD,KA3CgC;;AAAA,SA8CjCG,OA9CiC,GA8CvB,MAAM;AACd,YAAMC,WAAW,GAAG,KAAKC,IAAL,CAAUC,GAAV,CAAcf,KAAd,CAAoBgB,QAAxC;AACA,YAAMjC,MAAM,GAAG,KAAKH,KAAL,CAAWG,MAA1B;;AACA,UAAI8B,WAAW,KAAK,SAApB,EAA+B;AAC7B;AACA,cAAMpB,IAAI,GAAG;AAAE,oBAAUV;AAAZ,SAAb;;AACA,cAAMW,SAAS,GAAID,IAAD,IAAUvB,SAAS,CAAC,0CAAD,EAA6CC,EAAE,CAACwB,SAAH,CAAaF,IAAb,CAA7C,EAAiE,MAAjE,CAArC;;AACAC,QAAAA,SAAS,CAACD,IAAD,CAAT,CAAgBG,IAAhB,CAAqBC,GAAG,IAAI,CAE3B,CAFD,EAEGW,KAFH,CAESC,GAAG,IAAI;AACdC,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,SAJD;AAKAC,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACD,OAVD,MAUO;AACL;AACA,cAAMlB,IAAI,GAAG;AAAE,oBAAUV;AAAZ,SAAb;;AACA,cAAMW,SAAS,GAAID,IAAD,IAAUvB,SAAS,CAAC,yCAAD,EAA4CC,EAAE,CAACwB,SAAH,CAAaF,IAAb,CAA5C,EAAgE,MAAhE,CAArC;;AACAC,QAAAA,SAAS,CAACD,IAAD,CAAT,CAAgBG,IAAhB,CAAqBC,GAAG,IAAI,CAE3B,CAFD,EAEGW,KAFH,CAESC,GAAG,IAAI;AACdC,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,SAJD;AAKAC,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACD;AACF,KAtEgC;;AAAA,SAyEjCM,UAzEiC,GAyEpB,MAAM;AACjB,WAAK7B,QAAL,CAAc8B,SAAS,KAAK;AAC1BrC,QAAAA,MAAM,EAAE,CAACqC,SAAS,CAACrC;AADO,OAAL,CAAvB;AAGD,KA7EgC;AAAA;;AA+EjCsC,EAAAA,MAAM,GAAG;AAAA,wBACqB,KAAKvC,KAD1B;AAAA,UACCC,MADD,eACCA,MADD;AAAA,UACSC,OADT,eACSA,OADT;AAEP,WACE;AAAK,MAAA,KAAK,EAAET,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEADF,EAEE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AAAO,MAAA,WAAW,EAAC,yCAAnB;AAA+B,MAAA,SAAS,EAAC,WAAzC;AAAqD,MAAA,QAAQ,EAAE,KAAKY,SAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AAAO,MAAA,WAAW,EAAC,sCAAnB;AAA4B,MAAA,SAAS,EAAC,KAAtC;AAA4C,MAAA,IAAI,EAAE,OAAlD;AAA2D,MAAA,QAAQ,EAAE,KAAKM,OAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,SAAb;AAAuB,MAAA,GAAG,EAAC,KAA3B;AAAiC,MAAA,SAAS,EAAC,KAA3C;AAAiD,MAAA,IAAI,EAAE,OAAvD;AAAgE,MAAA,OAAO,EAAE,KAAKqB,OAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAwF/B,MAAM,GAAG,SAAH,GAAe,SAA7G,CAFF,CAFF,EAME;AAAG,MAAA,SAAS,EAAC,QAAb;AAAsB,MAAA,OAAO,EAAE,KAAKoC,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiDpC,MAAM,GAAG,MAAH,GAAY,MAAnE,CANF,EAOE,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,SAAb;AAAuB,MAAA,OAAO,EAAE,KAAKW,KAArC;AAA4C,MAAA,KAAK,EAAE;AAAElB,QAAAA,KAAK,EAAE;AAAT,OAAnD;AAAuE,MAAA,IAAI,EAAE,OAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAPF,EAQGQ,OAAO,GAAG,oBAAC,KAAD;AACT,MAAA,OAAO,EAAC,OADC;AAET,MAAA,WAAW,EAAC,8DAFH;AAGT,MAAA,IAAI,EAAC,OAHI;AAIT,MAAA,QAAQ,MAJC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAH,GAKH,IAbP,CAFF,CADF;AAoBD;;AArGgC;;AAwGnC,eAAeH,UAAf","sourcesContent":["// import { runInContext } from \"vm\";\r\n\r\nimport React, { Component } from 'react';\r\nimport { Input, Alert } from 'antd';\r\nimport { Button } from 'antd';\r\nimport './quickLogIn.css';\r\nimport ajaxParam from '../../api/ajaxParam';\r\nimport qs from 'qs';\r\nimport homebackground  from '../../assets/image/bg3.jpg';\r\nconst homeImage = {\r\n  width: '100%',\r\n  height: '100%',\r\n  position: 'absolute',\r\n  backgroundSize: '100% 100%', //记得这里100%\r\n  background: `url(${ homebackground })`,\r\n}\r\n\r\nclass quickLogIn extends Component {\r\n  state = {\r\n    isNote: true,\r\n    isError: false,\r\n    mobile: '',\r\n    code: ''\r\n  }\r\n\r\n  // 获取用户输入的手机号\r\n  setMobile = (e) => {\r\n    e.preventDefault();\r\n    this.setState({ mobile: e.target.value });\r\n  };\r\n\r\n  // 获取用户收入的验证码\r\n  setCode = (e) => {\r\n    e.preventDefault();\r\n    this.setState({ code: e.target.value });\r\n  }\r\n\r\n  // 登陆\r\n  logIn = () => {\r\n    const code = this.state.code;\r\n    const mobile = this.state.mobile;\r\n    const data = { \"mobile\": mobile, \"vcode\": code };\r\n    const reqResult = (data) => ajaxParam('http://47.94.103.140/gdom/login/mobile', qs.stringify(data), 'post');\r\n    reqResult(data).then(res => {\r\n      if (res.data.islogin) {\r\n        if (res.data.role === 'student') {\r\n          // 跳转到学生主页\r\n        } else {\r\n          // 跳转到老师主页\r\n         this.props.history.replace({ pathname: '/teacherHome', query: {\"uid\": res.data.uid, \"role\": res.data.role, \"username\":res.data.username} });\r\n        }\r\n      } else {\r\n        this.setState({ isError: true })\r\n        setTimeout(() => {\r\n          this.setState({ isError: false })\r\n        }, 2000)\r\n      }\r\n    }).catch(err => {\r\n      console.log(err);\r\n    })\r\n  };\r\n\r\n  // 获取验证码 \r\n  getCode = () => {\r\n    const buttonValue = this.refs.but.props.children;\r\n    const mobile = this.state.mobile;\r\n    if (buttonValue === '获取短信验证码') {\r\n      // 请求获取短信验证码的接口\r\n      const data = { \"mobile\": mobile };\r\n      const reqResult = (data) => ajaxParam('http://47.94.103.140/gdom/verify/message', qs.stringify(data), 'post');\r\n      reqResult(data).then(res => {\r\n        \r\n      }).catch(err => {\r\n        console.log(err);\r\n      })\r\n      console.log(\"短信验证\");\r\n    } else {\r\n      // 请求获取语音验证码的接口\r\n      const data = { \"mobile\": mobile };\r\n      const reqResult = (data) => ajaxParam('http://47.94.103.140/gdom/verify/speech', qs.stringify(data), 'post');\r\n      reqResult(data).then(res => {\r\n\r\n      }).catch(err => {\r\n        console.log(err);\r\n      })\r\n      console.log(\"语音验证\");\r\n    }\r\n  };\r\n\r\n  // 改变button的内容\r\n  changStyle = () => {\r\n    this.setState(prevState => ({\r\n      isNote: !prevState.isNote\r\n    }))\r\n  };\r\n\r\n  render() {\r\n    const { isNote, isError } = this.state;\r\n    return (\r\n      <div style={homeImage}>\r\n        <p className=\"title\">欢迎登陆粉笔头系统</p>\r\n        <div className=\"main\">\r\n          <Input placeholder=\"请输入手机号...\" className=\"InpNumber\" onChange={this.setMobile} />\r\n          <div className=\"getCode\">\r\n            <Input placeholder=\"请输入验证码\" className=\"Inp\" size={'large'} onChange={this.setCode} />\r\n            <Button type=\"primary\" ref=\"but\" className=\"btn\" size={'large'} onClick={this.getCode}>{isNote ? '获取短信验证码' : '获取语音验证码'}</Button>\r\n          </div>\r\n          <p className=\"change\" onClick={this.changStyle}>{isNote ? '语音验证' : '短信验证'}</p>\r\n          <Button type=\"primary\" onClick={this.logIn} style={{ width: \"300px\" }} size={'large'}>快速登陆</Button>\r\n          {isError ? <Alert\r\n            message=\"Error\"\r\n            description=\"验证失败，请重新验证\"\r\n            type=\"error\"\r\n            showIcon\r\n          /> : null}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default quickLogIn;"]},"metadata":{},"sourceType":"module"}