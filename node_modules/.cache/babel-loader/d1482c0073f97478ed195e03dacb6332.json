{"ast":null,"code":"var _jsxFileName = \"D:\\\\GDOM\\\\gdom\\\\src\\\\components\\\\accountManage\\\\accountManage.js\";\nimport React, { Component } from 'react';\nimport { Tag, Button, Input, Alert } from 'antd';\nimport './accountManage.css';\nimport ajax from '../../api/ajax';\nimport qs from 'qs'; // import { format } from 'url';\n\nexport class accountManage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      name: '杨卓',\n      cno: '16406050305',\n      mobile: '18792566635',\n      isError: false,\n      code: '',\n      isShowChangeMobile: false,\n      isShowChangePwd: false // 获取用户输入的手机号\n\n    };\n\n    this.setMobile = e => {\n      e.preventDefault();\n      this.setState({\n        mobile: e.target.value\n      });\n    };\n\n    this.setCode = e => {\n      e.preventDefault();\n      this.setState({\n        code: e.target.value\n      });\n    };\n\n    this.showChangeMobile = () => {\n      this.setState(prevState => ({\n        isShowChangeMobile: !prevState.isShowChangeMobile\n      }));\n    };\n\n    this.showChangePwd = () => {\n      this.setState(prevState => ({\n        isShowChangePwd: !prevState.isShowChangePwd\n      }));\n    };\n\n    this.changePwd = () => {};\n\n    this.changeMobile = () => {\n      const code = this.state.code;\n      const mobile = this.state.mobile;\n      const data = {\n        \"mobile\": mobile,\n        \"vcode\": code\n      };\n\n      const reqResult = data => ajax('http://47.94.103.140/gdom/login/mobile', qs.stringify(data), 'post');\n\n      reqResult(data).then(res => {\n        if (res.data === 'success') {// console.log(res)\n          // this.props.history.replace({ pathname: '/teacherHome', query: { 'id': 123, 'name': 'yz' } });\n        } else {\n          this.setState({\n            isError: true\n          });\n          setTimeout(() => {\n            this.setState({\n              isError: false\n            });\n          }, 2000);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.getCode = () => {\n      const mobile = this.state.mobile; // 请求获取短信验证码的接口\n\n      const data = {\n        \"mobile\": mobile\n      };\n\n      const reqResult = data => ajax('http://47.94.103.140/gdom/login/message', qs.stringify(data), 'post');\n\n      reqResult(data).then(res => {\n        if (res.data === 'success') {// console.log(res)\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n      console.log(\"短信验证\");\n    };\n  }\n\n  render() {\n    const _this$state = this.state,\n          name = _this$state.name,\n          cno = _this$state.cno,\n          mobile = _this$state.mobile,\n          isShowChangeMobile = _this$state.isShowChangeMobile,\n          isError = _this$state.isError,\n          isShowChangePwd = _this$state.isShowChangePwd;\n    return React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"name-con\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"\\u59D3\\u540D\\uFF1A\", name), React.createElement(\"div\", {\n      className: \"cno\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"\\u5B66\\u53F7\\uFF1A\", cno)), React.createElement(\"div\", {\n      className: \"telephone\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"\\u624B\\u673A\\u53F7\\uFF1A\", mobile ? mobile : '未绑定手机号'), React.createElement(Button, {\n      onClick: this.showChangeMobile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, mobile ? '修改' : '绑定')), isShowChangeMobile ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7...\",\n      className: \"InpNumber\",\n      onChange: this.setMobile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"getCode\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u9A8C\\u8BC1\\u7801\",\n      className: \"Inp\",\n      size: 'large',\n      onChange: this.setCode,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"primary\",\n      ref: \"but\",\n      className: \"btn\",\n      size: 'large',\n      onClick: this.getCode,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"\\u83B7\\u53D6\\u77ED\\u4FE1\\u9A8C\\u8BC1\\u7801\")), React.createElement(Button, {\n      type: \"primary\",\n      onClick: this.changeMobile,\n      style: {\n        width: \"300px\"\n      },\n      size: 'large',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"\\u91CD\\u7F6E\\u624B\\u673A\\u53F7\"), isError ? React.createElement(Alert, {\n      message: \"Error\",\n      description: \"\\u9A8C\\u8BC1\\u5931\\u8D25\\uFF0C\\u8BF7\\u91CD\\u65B0\\u9A8C\\u8BC1\",\n      type: \"error\",\n      showIcon: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }) : null) : null, React.createElement(Button, {\n      type: \"primary\",\n      size: 'large',\n      onClick: this.showChangePwd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"\\u5BC6\\u7801\\u91CD\\u7F6E\"), isShowChangePwd ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Input.Password, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u65E7\\u5BC6\\u7801...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(Input.Password, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u65B0\\u5BC6\\u7801...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"primary\",\n      size: 'large',\n      onClick: this.changePwd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"\\u91CD\\u7F6E\\u5BC6\\u7801\")) : null);\n  }\n\n}\nexport default accountManage;","map":{"version":3,"sources":["D:\\GDOM\\gdom\\src\\components\\accountManage\\accountManage.js"],"names":["React","Component","Tag","Button","Input","Alert","ajax","qs","accountManage","state","name","cno","mobile","isError","code","isShowChangeMobile","isShowChangePwd","setMobile","e","preventDefault","setState","target","value","setCode","showChangeMobile","prevState","showChangePwd","changePwd","changeMobile","data","reqResult","stringify","then","res","setTimeout","catch","err","console","log","getCode","render","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Tag, Button, Input, Alert } from 'antd';\r\nimport './accountManage.css';\r\nimport ajax from '../../api/ajax';\r\nimport qs from 'qs';\r\n// import { format } from 'url';\r\n\r\nexport class accountManage extends Component {\r\n  state = {\r\n    name: '杨卓',\r\n    cno: '16406050305',\r\n    mobile: '18792566635',\r\n    isError: false,\r\n    code: '',\r\n    isShowChangeMobile: false,\r\n    isShowChangePwd: false,\r\n  }\r\n\r\n  // 获取用户输入的手机号\r\n  setMobile = (e) => {\r\n    e.preventDefault();\r\n    this.setState({ mobile: e.target.value });\r\n  };\r\n\r\n  // 获取用户收入的验证码\r\n  setCode = (e) => {\r\n    e.preventDefault();\r\n    this.setState({ code: e.target.value });\r\n  }\r\n\r\n  // 点击修改或者绑定手机号时显示对应的模块\r\n  showChangeMobile = () => {\r\n    this.setState(prevState => ({isShowChangeMobile : !prevState.isShowChangeMobile}))\r\n  }\r\n\r\n  // 点击密码重置时显示对应的模块\r\n  showChangePwd = () => {\r\n    this.setState(prevState => ({isShowChangePwd : !prevState.isShowChangePwd}))\r\n  }\r\n\r\n  // 点击提交重置密码时的事件，请求ajax，传递参数\r\n  changePwd = () => {\r\n\r\n  }\r\n\r\n  // 重置手机号\r\n  changeMobile = () => {\r\n    const code = this.state.code;\r\n    const mobile = this.state.mobile;\r\n    const data = { \"mobile\": mobile, \"vcode\": code };\r\n    const reqResult = (data) => ajax('http://47.94.103.140/gdom/login/mobile', qs.stringify(data), 'post');\r\n    reqResult(data).then(res => {\r\n      if (res.data === 'success') {\r\n        // console.log(res)\r\n        // this.props.history.replace({ pathname: '/teacherHome', query: { 'id': 123, 'name': 'yz' } });\r\n      } else {\r\n        this.setState({ isError: true })\r\n        setTimeout(() => {\r\n          this.setState({ isError: false })\r\n        }, 2000)\r\n      }\r\n    }).catch(err => {\r\n      console.log(err);\r\n    })\r\n  };\r\n\r\n  // 获取验证码 \r\n  getCode = () => {\r\n    const mobile = this.state.mobile;\r\n    // 请求获取短信验证码的接口\r\n    const data = { \"mobile\": mobile };\r\n    const reqResult = (data) => ajax('http://47.94.103.140/gdom/login/message', qs.stringify(data), 'post');\r\n    reqResult(data).then(res => {\r\n      if (res.data === 'success') {\r\n        // console.log(res)\r\n      }\r\n    }).catch(err => {\r\n      console.log(err);\r\n    })\r\n    console.log(\"短信验证\");\r\n  };\r\n\r\n  render() {\r\n    const { name, cno, mobile, isShowChangeMobile, isError, isShowChangePwd} = this.state;\r\n    return (\r\n      <div className=\"content\">\r\n        <div className=\"name-con\">\r\n          <div className=\"name\">姓名：{name}</div>\r\n          <div className=\"cno\">学号：{cno}</div>\r\n        </div>\r\n        <div className=\"telephone\">\r\n          <span>手机号：{mobile ? mobile : '未绑定手机号'}</span>\r\n          <Button onClick={this.showChangeMobile}>{mobile ? '修改' : '绑定'}</Button>\r\n        </div>\r\n        {isShowChangeMobile ? <div>\r\n          <Input placeholder=\"请输入手机号...\" className=\"InpNumber\" onChange={this.setMobile} />\r\n          <div className=\"getCode\">\r\n            <Input placeholder=\"请输入验证码\" className=\"Inp\" size={'large'} onChange={this.setCode} />\r\n            <Button type=\"primary\" ref=\"but\" className=\"btn\" size={'large'} onClick={this.getCode}>获取短信验证码</Button>\r\n          </div>\r\n          <Button type=\"primary\" onClick={this.changeMobile} style={{ width: \"300px\" }} size={'large'}>重置手机号</Button>\r\n          {isError ? <Alert\r\n            message=\"Error\"\r\n            description=\"验证失败，请重新验证\"\r\n            type=\"error\"\r\n            showIcon\r\n          /> : null}\r\n        </div> : null}\r\n\r\n        <Button type=\"primary\" size={'large'} onClick={this.showChangePwd}>密码重置</Button>\r\n        {isShowChangePwd ? <div>\r\n          <Input.Password placeholder=\"请输入旧密码...\" />\r\n          <Input.Password placeholder=\"请输入新密码...\" />\r\n          <Button type=\"primary\" size={'large'} onClick={this.changePwd}>重置密码</Button>\r\n        </div> : null}\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default accountManage\r\n"]},"metadata":{},"sourceType":"module"}