{"ast":null,"code":"var _jsxFileName = \"c:\\\\Users\\\\yangzhuo_sx\\\\Desktop\\\\GDOM\\\\GDOM\\\\gdom\\\\src\\\\components\\\\forgotLogIn\\\\forgotLogIn.js\";\nimport { runInContext } from \"vm\";\nimport React, { Component } from 'react';\nimport { Input, Alert } from 'antd';\nimport { Button } from 'antd';\nimport './forgotLogIn.css';\nimport ajax from '../../api/ajax';\nimport qs from 'qs';\n\nclass forgotLogIn extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isNote: true,\n      isError: false,\n      mobile: '',\n      code: '',\n      pwd: '' // 获取用户输入的密码\n\n    };\n\n    this.setPwd = e => {\n      e.preventDefault();\n      this.setState({\n        pwd: e.target.value\n      });\n    };\n\n    this.setMobile = e => {\n      e.preventDefault();\n      this.setState({\n        mobile: e.target.value\n      });\n    };\n\n    this.setCode = e => {\n      e.preventDefault();\n      this.setState({\n        code: e.target.value\n      });\n    };\n\n    this.logIn = () => {\n      const _this$state = this.state,\n            code = _this$state.code,\n            mobile = _this$state.mobile,\n            pwd = _this$state.pwd;\n      const data = {\n        \"mobile\": mobile,\n        \"code\": code,\n        \"pwd\": pwd\n      };\n\n      const reqResult = data => ajax('http://47.94.103.140/gdom/user/forgetpwd', qs.stringify(data), 'post');\n\n      reqResult(data).then(res => {\n        console.log(data);\n\n        if (res.data === 'success') {// console.log(res)\n          // this.props.history.replace({ pathname: '/teacherHome', query: { 'id': 123, 'name': 'yz' } });\n        } else {\n          this.setState({\n            isError: true\n          });\n          setTimeout(() => {\n            this.setState({\n              isError: false\n            });\n          }, 2000);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.getCode = () => {\n      const buttonValue = this.refs.but.props.children;\n      const mobile = this.state.mobile;\n\n      if (buttonValue === '获取短信验证码') {\n        // 请求获取短信验证码的接口\n        const data = {\n          \"mobile\": mobile\n        };\n\n        const reqResult = data => ajax('http://47.94.103.140/gdom/verifymessage', qs.stringify(data), 'post');\n\n        reqResult(data).then(res => {\n          if (res.data === 'success') {// console.log(res)\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n        console.log(\"短信验证\");\n      } else {\n        // 请求获取语音验证码的接口\n        const data = {\n          \"mobile\": mobile\n        };\n\n        const reqResult = data => ajax('http://47.94.103.140/gdom/verify/speech', qs.stringify(data), 'post');\n\n        reqResult(data).then(res => {\n          if (res.data === 'success') {// console.log(res)\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n        console.log(\"语音验证\");\n      }\n    };\n\n    this.changStyle = () => {\n      this.setState(prevState => ({\n        isNote: !prevState.isNote\n      }));\n    };\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          isNote = _this$state2.isNote,\n          isError = _this$state2.isError;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"\\u6B22\\u8FCE\\u767B\\u9646\\u7C89\\u7B14\\u5934\\u7CFB\\u7EDF\"), React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(Input.Password, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u65B0\\u5BC6\\u7801...\",\n      className: \"InpPwd\",\n      onChange: this.setPwd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7...\",\n      className: \"InpNumber\",\n      onChange: this.setMobile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"getCode\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u9A8C\\u8BC1\\u7801\",\n      className: \"Inp\",\n      size: 'large',\n      onChange: this.setCode,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"primary\",\n      ref: \"but\",\n      className: \"btn\",\n      size: 'large',\n      onClick: this.getCode,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, isNote ? '获取短信验证码' : '获取语音验证码')), React.createElement(\"p\", {\n      className: \"change\",\n      onClick: this.changStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, isNote ? '语音验证' : '短信验证'), React.createElement(Button, {\n      type: \"primary\",\n      onClick: this.logIn,\n      style: {\n        width: \"300px\"\n      },\n      size: 'large',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"\\u91CD\\u7F6E\\u5BC6\\u7801\"), isError ? React.createElement(Alert, {\n      message: \"Error\",\n      description: \"\\u9A8C\\u8BC1\\u5931\\u8D25\\uFF0C\\u8BF7\\u91CD\\u65B0\\u9A8C\\u8BC1\",\n      type: \"error\",\n      showIcon: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }) : null));\n  }\n\n}\n\nexport default forgotLogIn;","map":{"version":3,"sources":["c:\\Users\\yangzhuo_sx\\Desktop\\GDOM\\GDOM\\gdom\\src\\components\\forgotLogIn\\forgotLogIn.js"],"names":["runInContext","React","Component","Input","Alert","Button","ajax","qs","forgotLogIn","state","isNote","isError","mobile","code","pwd","setPwd","e","preventDefault","setState","target","value","setMobile","setCode","logIn","data","reqResult","stringify","then","res","console","log","setTimeout","catch","err","getCode","buttonValue","refs","but","props","children","changStyle","prevState","render","width"],"mappings":"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","sourcesContent":["import { runInContext } from \"vm\";\r\n\r\nimport React, { Component } from 'react';\r\nimport { Input, Alert } from 'antd';\r\nimport { Button } from 'antd';\r\nimport './forgotLogIn.css';\r\nimport ajax from '../../api/ajax';\r\nimport qs from 'qs';\r\n\r\nclass forgotLogIn extends Component {\r\n  state = {\r\n    isNote: true,\r\n    isError: false,\r\n    mobile: '',\r\n    code: '',\r\n    pwd: '',\r\n  }\r\n\r\n  // 获取用户输入的密码\r\n  setPwd = (e) => {\r\n    e.preventDefault();\r\n    this.setState({ pwd: e.target.value });\r\n  };\r\n\r\n  // 获取用户输入的手机号\r\n  setMobile = (e) => {\r\n    e.preventDefault();\r\n    this.setState({ mobile: e.target.value });\r\n  };\r\n\r\n  // 获取用户收入的验证码\r\n  setCode = (e) => {\r\n    e.preventDefault();\r\n    this.setState({ code: e.target.value });\r\n  }\r\n\r\n  // 登陆\r\n  logIn = () => {\r\n    const { code, mobile, pwd} = this.state;\r\n    const data = { \"mobile\": mobile, \"code\": code, \"pwd\": pwd };\r\n    const reqResult = (data) => ajax('http://47.94.103.140/gdom/user/forgetpwd', qs.stringify(data), 'post');\r\n    reqResult(data).then(res => {\r\n      console.log(data);\r\n      if (res.data === 'success') {\r\n        // console.log(res)\r\n        // this.props.history.replace({ pathname: '/teacherHome', query: { 'id': 123, 'name': 'yz' } });\r\n      } else {\r\n        this.setState({ isError: true })\r\n        setTimeout(() => {\r\n          this.setState({ isError: false })\r\n        }, 2000)\r\n      }\r\n    }).catch(err => {\r\n      console.log(err);\r\n    })\r\n  };\r\n\r\n  // 获取验证码 \r\n  getCode = () => {\r\n    const buttonValue = this.refs.but.props.children;\r\n    const mobile = this.state.mobile;\r\n    if (buttonValue === '获取短信验证码') {\r\n      // 请求获取短信验证码的接口\r\n      const data = { \"mobile\": mobile };\r\n      const reqResult = (data) => ajax('http://47.94.103.140/gdom/verifymessage', qs.stringify(data), 'post');\r\n      reqResult(data).then(res => {\r\n        if (res.data === 'success') {\r\n          // console.log(res)\r\n        }\r\n      }).catch(err => {\r\n        console.log(err);\r\n      })\r\n      console.log(\"短信验证\");\r\n    } else {\r\n      // 请求获取语音验证码的接口\r\n      const data = { \"mobile\": mobile };\r\n      const reqResult = (data) => ajax('http://47.94.103.140/gdom/verify/speech', qs.stringify(data), 'post');\r\n      reqResult(data).then(res => {\r\n        if (res.data === 'success') {\r\n          // console.log(res)\r\n        }\r\n      }).catch(err => {\r\n        console.log(err);\r\n      })\r\n      console.log(\"语音验证\");\r\n    }\r\n  };\r\n\r\n  // 改变button的内容\r\n  changStyle = () => {\r\n    this.setState(prevState => ({\r\n      isNote: !prevState.isNote\r\n    }))\r\n  };\r\n\r\n  render() {\r\n    const { isNote, isError } = this.state;\r\n    return (\r\n      <div>\r\n        <p className=\"title\">欢迎登陆粉笔头系统</p>\r\n        <div className=\"main\">\r\n          <Input.Password placeholder=\"请输入新密码...\" className=\"InpPwd\" onChange={this.setPwd} />\r\n          <Input placeholder=\"请输入手机号...\" className=\"InpNumber\" onChange={this.setMobile} />\r\n          <div className=\"getCode\">\r\n            <Input placeholder=\"请输入验证码\" className=\"Inp\" size={'large'} onChange={this.setCode} />\r\n            <Button type=\"primary\" ref=\"but\" className=\"btn\" size={'large'} onClick={this.getCode}>{isNote ? '获取短信验证码' : '获取语音验证码'}</Button>\r\n          </div>\r\n          <p className=\"change\" onClick={this.changStyle}>{isNote ? '语音验证' : '短信验证'}</p>\r\n          <Button type=\"primary\" onClick={this.logIn} style={{ width: \"300px\" }} size={'large'}>重置密码</Button>\r\n          {isError ? <Alert\r\n            message=\"Error\"\r\n            description=\"验证失败，请重新验证\"\r\n            type=\"error\"\r\n            showIcon\r\n          /> : null}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default forgotLogIn;"]},"metadata":{},"sourceType":"module"}