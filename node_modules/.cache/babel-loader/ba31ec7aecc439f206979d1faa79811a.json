{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\GDOM\\\\GDOM\\\\gdom\\\\src\\\\components\\\\myStudent\\\\myStudent.js\";\nimport React, { Component } from 'react';\nimport { Table, Divider, Tag, Button } from 'antd'; // import cookie from 'react-cookie';\n// import personalCenter from '../personalCenter/personalCenter';\n\nimport { Card } from 'antd';\nimport './myStudent.css';\nimport ajaxParam from '../../api/ajaxParam';\nimport qs from 'qs'; // import { formatCountdown } from 'antd/lib/statistic/utils';\n\nexport class myStudent extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      id: '',\n      // 表格每一行的key \n      dataKey: '1',\n      // 点击展示详情显示模块\n      showDetails: false,\n      columns: [{\n        title: '姓名',\n        dataIndex: 'name',\n        key: 'name',\n        align: 'center'\n      }, {\n        title: '学号',\n        dataIndex: 'number',\n        key: 'number',\n        align: 'center'\n      }, {\n        title: '题目',\n        dataIndex: 'item',\n        key: 'item',\n        align: 'center'\n      }, {\n        title: '期中成绩',\n        dataIndex: 'midterm',\n        key: 'midterm',\n        align: 'center'\n      }, {\n        title: '期末成绩',\n        dataIndex: 'final',\n        key: 'final',\n        align: 'center'\n      }, {\n        title: '期末成绩',\n        dataIndex: 'score',\n        key: 'score',\n        align: 'center'\n      }],\n      data: [],\n      // 其他要展示的值\n      otherValue: {},\n      uid: ''\n    };\n\n    this.showItem = (e, text, record) => {\n      e.preventDefault(); // this.setState({ showDetails: true });\n\n      this.setState(prevState => ({\n        showDetails: !prevState.showDetails\n      }));\n      setTimeout(() => {\n        this.setState({\n          showDetails: false\n        });\n      }, 3000);\n    };\n\n    this.componentWillMount = () => {\n      this.setState({\n        uid: this.props.uid\n      });\n    };\n\n    this.componentDidMount = () => {\n      const _this$state = this.state,\n            uid = _this$state.uid,\n            dataKey = _this$state.dataKey;\n      const data = {\n        \"uid\": uid\n      };\n\n      const reqResult = data => ajaxParam('http://47.94.103.140/gdom/lecture/mystudent', qs.stringify(data), 'post');\n\n      reqResult(data).then(res => {\n        console.log(res);\n        const res_data = res.data;\n        const table_data = [];\n        res_data.forEach(item => {\n          let data_item = {\n            key: item[\"student\"].sid,\n            name: item[\"userInfo\"].username,\n            number: item[\"student\"].sno,\n            item: item[\"tittle\"],\n            midterm: item[\"student\"].midScore ? item[\"student\"].midScore : '—',\n            final: item[\"student\"].finalScore ? item[\"student\"].finalScore : '—',\n            score: item[\"student\"].score ? item[\"student\"].score : '—'\n          };\n          table_data.push(data_item);\n        }); // console.log(table_data);\n\n        this.setState({\n          data: table_data\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.click = (recordr, owkey) => {\n      // console.log(recordr, owkey)\n      this.setState({\n        otherValue: recordr\n      });\n    };\n  }\n\n  render() {\n    const columns = this.state.columns;\n    const data = this.state.data;\n    const showDetails = this.state.showDetails;\n    const uid = this.state.uid;\n    const otherValue = this.setState.otherValue;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(Table, {\n      columns: columns,\n      dataSource: data,\n      onRow: (record, rowkey) => {\n        return {\n          //点击行 record 指的本行的数据内容，rowkey指的是本行的索引\n          onClick: this.click.bind(this, record, rowkey)\n        };\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }));\n  }\n\n}\nexport default myStudent;","map":{"version":3,"sources":["C:\\Users\\Lenovo\\Desktop\\GDOM\\GDOM\\gdom\\src\\components\\myStudent\\myStudent.js"],"names":["React","Component","Table","Divider","Tag","Button","Card","ajaxParam","qs","myStudent","state","id","dataKey","showDetails","columns","title","dataIndex","key","align","data","otherValue","uid","showItem","e","text","record","preventDefault","setState","prevState","setTimeout","componentWillMount","props","componentDidMount","reqResult","stringify","then","res","console","log","res_data","table_data","forEach","item","data_item","sid","name","username","number","sno","midterm","midScore","final","finalScore","score","push","catch","err","click","recordr","owkey","render","rowkey","onClick","bind"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,EAAgBC,OAAhB,EAAyBC,GAAzB,EAA8BC,MAA9B,QAA4C,MAA5C,C,CACA;AACA;;AACA,SAASC,IAAT,QAAqB,MAArB;AACA,OAAO,iBAAP;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,EAAP,MAAe,IAAf,C,CACA;;AAEA,OAAO,MAAMC,SAAN,SAAwBR,SAAxB,CAAkC;AAAA;AAAA;AAAA,SACvCS,KADuC,GAC/B;AACNC,MAAAA,EAAE,EAAE,EADE;AAEN;AACAC,MAAAA,OAAO,EAAE,GAHH;AAIN;AACAC,MAAAA,WAAW,EAAE,KALP;AAMNC,MAAAA,OAAO,EAAE,CACP;AACEC,QAAAA,KAAK,EAAE,IADT;AAEEC,QAAAA,SAAS,EAAE,MAFb;AAGEC,QAAAA,GAAG,EAAE,MAHP;AAIEC,QAAAA,KAAK,EAAE;AAJT,OADO,EAOP;AACEH,QAAAA,KAAK,EAAE,IADT;AAEEC,QAAAA,SAAS,EAAE,QAFb;AAGEC,QAAAA,GAAG,EAAE,QAHP;AAIEC,QAAAA,KAAK,EAAE;AAJT,OAPO,EAaP;AACEH,QAAAA,KAAK,EAAE,IADT;AAEEC,QAAAA,SAAS,EAAE,MAFb;AAGEC,QAAAA,GAAG,EAAE,MAHP;AAIEC,QAAAA,KAAK,EAAE;AAJT,OAbO,EAmBP;AACEH,QAAAA,KAAK,EAAE,MADT;AAEEC,QAAAA,SAAS,EAAE,SAFb;AAGEC,QAAAA,GAAG,EAAE,SAHP;AAIEC,QAAAA,KAAK,EAAE;AAJT,OAnBO,EAyBP;AACEH,QAAAA,KAAK,EAAE,MADT;AAEEC,QAAAA,SAAS,EAAE,OAFb;AAGEC,QAAAA,GAAG,EAAE,OAHP;AAIEC,QAAAA,KAAK,EAAE;AAJT,OAzBO,EA+BP;AACEH,QAAAA,KAAK,EAAE,MADT;AAEEC,QAAAA,SAAS,EAAE,OAFb;AAGEC,QAAAA,GAAG,EAAE,OAHP;AAIEC,QAAAA,KAAK,EAAE;AAJT,OA/BO,CANH;AA0DNC,MAAAA,IAAI,EAAE,EA1DA;AA2DN;AACAC,MAAAA,UAAU,EAAE,EA5DN;AA6DNC,MAAAA,GAAG,EAAE;AA7DC,KAD+B;;AAAA,SAgEvCC,QAhEuC,GAgE5B,CAACC,CAAD,EAAIC,IAAJ,EAAUC,MAAV,KAAqB;AAC9BF,MAAAA,CAAC,CAACG,cAAF,GAD8B,CAE9B;;AACA,WAAKC,QAAL,CAAcC,SAAS,KAAK;AAC1Bf,QAAAA,WAAW,EAAE,CAACe,SAAS,CAACf;AADE,OAAL,CAAvB;AAIAgB,MAAAA,UAAU,CAAC,MAAM;AACf,aAAKF,QAAL,CAAc;AAAEd,UAAAA,WAAW,EAAE;AAAf,SAAd;AACD,OAFS,EAEP,IAFO,CAAV;AAGD,KA1EsC;;AAAA,SA4EvCiB,kBA5EuC,GA4ElB,MAAM;AACzB,WAAKH,QAAL,CAAc;AAAEN,QAAAA,GAAG,EAAE,KAAKU,KAAL,CAAWV;AAAlB,OAAd;AACD,KA9EsC;;AAAA,SAgFvCW,iBAhFuC,GAgFnB,MAAM;AAAA,0BACC,KAAKtB,KADN;AAAA,YAChBW,GADgB,eAChBA,GADgB;AAAA,YACXT,OADW,eACXA,OADW;AAExB,YAAMO,IAAI,GAAG;AAAE,eAAOE;AAAT,OAAb;;AACA,YAAMY,SAAS,GAAId,IAAD,IAAUZ,SAAS,CAAC,6CAAD,EAAgDC,EAAE,CAAC0B,SAAH,CAAaf,IAAb,CAAhD,EAAoE,MAApE,CAArC;;AACAc,MAAAA,SAAS,CAACd,IAAD,CAAT,CAAgBgB,IAAhB,CAAqBC,GAAG,IAAI;AAC1BC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,cAAMG,QAAQ,GAAGH,GAAG,CAACjB,IAArB;AACA,cAAMqB,UAAU,GAAG,EAAnB;AACAD,QAAAA,QAAQ,CAACE,OAAT,CAAiBC,IAAI,IAAI;AACvB,cAAIC,SAAS,GAAG;AACd1B,YAAAA,GAAG,EAAEyB,IAAI,CAAC,SAAD,CAAJ,CAAgBE,GADP;AAEdC,YAAAA,IAAI,EAAEH,IAAI,CAAC,UAAD,CAAJ,CAAiBI,QAFT;AAGdC,YAAAA,MAAM,EAAEL,IAAI,CAAC,SAAD,CAAJ,CAAgBM,GAHV;AAIdN,YAAAA,IAAI,EAAEA,IAAI,CAAC,QAAD,CAJI;AAKdO,YAAAA,OAAO,EAAEP,IAAI,CAAC,SAAD,CAAJ,CAAgBQ,QAAhB,GAA2BR,IAAI,CAAC,SAAD,CAAJ,CAAgBQ,QAA3C,GAAsD,GALjD;AAMdC,YAAAA,KAAK,EAAET,IAAI,CAAC,SAAD,CAAJ,CAAgBU,UAAhB,GAA6BV,IAAI,CAAC,SAAD,CAAJ,CAAgBU,UAA7C,GAA0D,GANnD;AAOdC,YAAAA,KAAK,EAAEX,IAAI,CAAC,SAAD,CAAJ,CAAgBW,KAAhB,GAAwBX,IAAI,CAAC,SAAD,CAAJ,CAAgBW,KAAxC,GAAgD;AAPzC,WAAhB;AASAb,UAAAA,UAAU,CAACc,IAAX,CAAgBX,SAAhB;AACD,SAXD,EAJ0B,CAgB1B;;AACA,aAAKhB,QAAL,CAAc;AACZR,UAAAA,IAAI,EAAEqB;AADM,SAAd;AAGD,OApBD,EAoBGe,KApBH,CAoBSC,GAAG,IAAI;AACdnB,QAAAA,OAAO,CAACC,GAAR,CAAYkB,GAAZ;AACD,OAtBD;AAuBD,KA3GsC;;AAAA,SA6GvCC,KA7GuC,GA6G/B,CAACC,OAAD,EAAUC,KAAV,KAAoB;AAC1B;AACA,WAAKhC,QAAL,CAAc;AAAEP,QAAAA,UAAU,EAAEsC;AAAd,OAAd;AACD,KAhHsC;AAAA;;AAiHvCE,EAAAA,MAAM,GAAG;AACP,UAAM9C,OAAO,GAAG,KAAKJ,KAAL,CAAWI,OAA3B;AACA,UAAMK,IAAI,GAAG,KAAKT,KAAL,CAAWS,IAAxB;AACA,UAAMN,WAAW,GAAG,KAAKH,KAAL,CAAWG,WAA/B;AACA,UAAMQ,GAAG,GAAG,KAAKX,KAAL,CAAWW,GAAvB;AACA,UAAMD,UAAU,GAAG,KAAKO,QAAL,CAAcP,UAAjC;AACA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAEN,OAAhB;AAAyB,MAAA,UAAU,EAAEK,IAArC;AACE,MAAA,KAAK,EAAE,CAACM,MAAD,EAASoC,MAAT,KAAoB;AACzB,eAAO;AACL;AACAC,UAAAA,OAAO,EAAE,KAAKL,KAAL,CAAWM,IAAX,CAAgB,IAAhB,EAAsBtC,MAAtB,EAA8BoC,MAA9B;AAFJ,SAAP;AAID,OANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAYD;;AAnIsC;AAsIzC,eAAepD,SAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport { Table, Divider, Tag, Button } from 'antd';\r\n// import cookie from 'react-cookie';\r\n// import personalCenter from '../personalCenter/personalCenter';\r\nimport { Card } from 'antd'\r\nimport './myStudent.css'\r\nimport ajaxParam from '../../api/ajaxParam';\r\nimport qs from 'qs'\r\n// import { formatCountdown } from 'antd/lib/statistic/utils';\r\n\r\nexport class myStudent extends Component {\r\n  state = {\r\n    id: '',\r\n    // 表格每一行的key \r\n    dataKey: '1',\r\n    // 点击展示详情显示模块\r\n    showDetails: false,\r\n    columns: [\r\n      {\r\n        title: '姓名',\r\n        dataIndex: 'name',\r\n        key: 'name',\r\n        align: 'center'\r\n      },\r\n      {\r\n        title: '学号',\r\n        dataIndex: 'number',\r\n        key: 'number',\r\n        align: 'center'\r\n      },\r\n      {\r\n        title: '题目',\r\n        dataIndex: 'item',\r\n        key: 'item',\r\n        align: 'center'\r\n      },\r\n      {\r\n        title: '期中成绩',\r\n        dataIndex: 'midterm',\r\n        key: 'midterm',\r\n        align: 'center'\r\n      },\r\n      {\r\n        title: '期末成绩',\r\n        dataIndex: 'final',\r\n        key: 'final',\r\n        align: 'center'\r\n      },\r\n      {\r\n        title: '期末成绩',\r\n        dataIndex: 'score',\r\n        key: 'score',\r\n        align: 'center'\r\n      },\r\n      // {\r\n      //   title: '详情信息',\r\n      //   key: 'action',\r\n      //   align: 'center',\r\n      //   render: (text, record) => (\r\n      //     <span>\r\n      //       <Button type=\"primary\" onClick={this.showItem}>详情</Button>\r\n      //       {/* {this.state.showDetails ? <div>\r\n      //         <span>{record.name}</span>\r\n      //         <span>{record.number}</span>\r\n      //       </div> : null} */}\r\n      //     </span>\r\n      //   ),\r\n      // },\r\n    ],\r\n    data: [],\r\n    // 其他要展示的值\r\n    otherValue: {},\r\n    uid: ''\r\n  }\r\n  showItem = (e, text, record) => {\r\n    e.preventDefault();\r\n    // this.setState({ showDetails: true });\r\n    this.setState(prevState => ({\r\n      showDetails: !prevState.showDetails\r\n    }));\r\n\r\n    setTimeout(() => {\r\n      this.setState({ showDetails: false })\r\n    }, 3000)\r\n  }\r\n\r\n  componentWillMount = () => {\r\n    this.setState({ uid: this.props.uid });\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    const { uid, dataKey } = this.state;\r\n    const data = { \"uid\": uid };\r\n    const reqResult = (data) => ajaxParam('http://47.94.103.140/gdom/lecture/mystudent', qs.stringify(data), 'post');\r\n    reqResult(data).then(res => {\r\n      console.log(res);\r\n      const res_data = res.data;\r\n      const table_data = [];\r\n      res_data.forEach(item => {\r\n        let data_item = {\r\n          key: item[\"student\"].sid,\r\n          name: item[\"userInfo\"].username,\r\n          number: item[\"student\"].sno,\r\n          item: item[\"tittle\"],\r\n          midterm: item[\"student\"].midScore ? item[\"student\"].midScore : '—',\r\n          final: item[\"student\"].finalScore ? item[\"student\"].finalScore : '—',\r\n          score: item[\"student\"].score ? item[\"student\"].score : '—',\r\n        }\r\n        table_data.push(data_item)\r\n      });\r\n      // console.log(table_data);\r\n      this.setState({\r\n        data: table_data\r\n      })\r\n    }).catch(err => {\r\n      console.log(err);\r\n    })\r\n  }\r\n\r\n  click = (recordr, owkey) => {\r\n    // console.log(recordr, owkey)\r\n    this.setState({ otherValue: recordr });\r\n  }\r\n  render() {\r\n    const columns = this.state.columns;\r\n    const data = this.state.data;\r\n    const showDetails = this.state.showDetails;\r\n    const uid = this.state.uid;\r\n    const otherValue = this.setState.otherValue;\r\n    return (\r\n      <div>\r\n        <Table columns={columns} dataSource={data}\r\n          onRow={(record, rowkey) => {\r\n            return {\r\n              //点击行 record 指的本行的数据内容，rowkey指的是本行的索引\r\n              onClick: this.click.bind(this, record, rowkey)\r\n            }\r\n          }}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default myStudent;\r\n"]},"metadata":{},"sourceType":"module"}